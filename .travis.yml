sudo: true
language: cpp
compiler: gcc

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
#  - sudo add-apt-repository -y ppa:lyx-devel/release
  - sudo apt-get update -qq

install:
  - sudo apt-get install -qq g++-5
  - sudo apt-get install -qq graphviz
#  - sudo apt-get install -qq libboost-all-dev
#  - sudo apt-get install -qq lyx
#  - sudo apt-get install -qq texlive
#  - sudo apt-get install -qq pgf
  - sudo pip install codecov

addons:
  apt:
    sources:
    - boost-latest
    - ubuntu-toolchain-r-test
    packages:
    - gcc-5
    - g++-5
    - libboost1.55-all-dev

script:
 - type dot
 - qmake BoostGraphTutorial/boost_graph_tutorial.pro
 - make
 - ./boost_graph_tutorial
 # gcov
 - qmake BoostGraphTutorial/boost_graph_tutorial_gcov.pro
 - make
 - ./boost_graph_tutorial
 # Display gcov files
 - for filename in `ls *.cpp`; do gcov $filename; done
 - for filename in `ls *.h`; do gcov $filename; done
 # Display gcov files
 - for filename in `ls *.h.gcov`; do cat $filename; done
 - for filename in `ls *.cpp.gcov`; do cat $filename; done

after_success: codecov
